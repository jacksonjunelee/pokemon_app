<div id="map-canvas" style="width: 400px;height: 500px;"></div>

<script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>

<input type="filepicker" data-fp-apikey="<%= ENV["FILEPICKER_POKEMON"] %>" data-fp-mimetypes="*/*" data-fp-container="modal" onchange="alert(event.fpfile.url)">

<script>
$(function(){
  var me = new Me(1);
  game.stage.push(me);
  $('body').on('click','button#attack','');
  $('body').on('click','button#switch',gameSwitch);
  $('body').on('click','button#item','');
  $('body').on('click','button#flee','');

// var map = $('<div>').attr('id','map-canvas').css({"width":"900px","height":"900px"});
// $('body').appendTo(map);
});

var gameStart= function(){
  loadGameDiv();
  game.start(this.pokemon);
  game.assign();
  game.checkFirstMove();

  deleteLocation = locations.splice(this.index,1);
  console.log(locations);
  // indexes = $.map(list, function(obj, index) {
  //   if(obj.prop2 == "yutu") {
  //     return index;
  //   }
  // })
  //
  // firstIndex = indexes[0]
  this.setMap(null);
  }


var loadGameDiv = function() {

  var gameDiv = $('<div>').attr('id','gameConsole').css({"width":"400px","height":"500px","background-color":"red"});
  // options
  var optionDiv = $('<div>').attr('id','options').css({"width":"90%","height":"20%",});
  var attackButton = $('<button>').addClass('option').attr('id', 'attack').text('Attack')
  var switchButton = $('<button>').addClass('option').attr('id', 'switch').text('PKMN')
  var itemButton = $('<button>').addClass('option').attr('id', 'item').text('Items')
  var fleeButton = $('<button>').addClass('option').attr('id', 'flee').text('Flee')

  var myName = $('<label>').addClass('me').attr('id','me')
  var myPokemonName = $('<label>').addClass('me').attr('id','myPokemonName');
  var myPokemonImageTag = $('<img>').addClass('me').attr('id','myPokemon');
  var myPokemonImageHp = $('<label>').addClass('me').attr('id','myPokemonHp');


  var pokemonName= $('<label>').addClass('pokeOpponent').attr('id','pokeName');
  var pokemonImageTag = $('<img>').addClass('pokeOpponent').attr('id','pokeImg');
  var pokemonHp = $('<label>').addClass('pokeOpponent').attr('id','pokeHp');

  var pokemonOpponentDiv = $('<div>').attr('id','pokemonOpponent');
  var myPokemonDiv = $('<div>').attr('id','myPokemonOut').css({"width":"10%","height":"20%",});

  optionDiv.append(attackButton).append(switchButton).append(itemButton).append(fleeButton);
  pokemonName.appendTo(pokemonOpponentDiv);
  pokemonImageTag.appendTo(pokemonOpponentDiv);
  pokemonHp.appendTo(pokemonOpponentDiv);
  myName.appendTo(myPokemonDiv);
  myPokemonName.appendTo(myPokemonDiv);
  myPokemonImageTag.appendTo(myPokemonDiv);
  myPokemonImageHp.appendTo(myPokemonDiv);
  pokemonOpponentDiv.appendTo(gameDiv);
  myPokemonDiv.appendTo(gameDiv);
  optionDiv.appendTo(gameDiv);

  gameDiv.appendTo('body');

}

var gameSwitch = function(){
  var myPokemonArray = game.show();

  var myPokemonB1 = $('<button>').addClass('pokemonB').attr('id', 'myPoke1').text(myPokemonArray[1]);
  var myPokemonB2 = $('<button>').addClass('pokemonB').attr('id', 'myPoke2').text(myPokemonArray[2]);
  var myPokemonB3 = $('<button>').addClass('pokemonB').attr('id', 'myPoke3').text(myPokemonArray[3]);
  var myPokemonB4 = $('<button>').addClass('pokemonB').attr('id', 'myPoke4').text(myPokemonArray[4]);
  var myPokemonB5 = $('<button>').addClass('pokemonB').attr('id', 'myPoke5').text(myPokemonArray[5]);

  var allMyPokemonDiv = $('<div>').attr('id','myPokemonArray');
  $('div#options').replaceWith$(allMyPokemonDiv);


}

</script>
